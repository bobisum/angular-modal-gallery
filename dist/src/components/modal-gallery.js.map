{"version":3,"sources":["../../../src/components/modal-gallery.ts"],"names":[],"mappings":"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","file":"modal-gallery.js","sourceRoot":"","sourcesContent":["/*\n The MIT License (MIT)\n\n Copyright (c) 2017 Stefano Cappa (Ks89)\n Copyright (c) 2016 vimalavinisha (only for version 1)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\nimport {\n  OnInit, Input, Output, EventEmitter, HostListener, Component, OnDestroy, OnChanges,\n  SimpleChanges\n} from '@angular/core';\nimport {Observable, Subscription} from \"rxjs\";\nimport {KeyboardService} from './keyboard.service';\n\nexport enum Action {\n  NORMAL, // default value\n  CLICK, // mouse click\n  KEYBOARD,\n  SWIPE,\n  LOAD\n}\n\nexport class ImageModalEvent {\n  action: Action;\n  result: number | boolean;\n\n  constructor(action: Action, result: number | boolean) {\n    this.action = action;\n    this.result = result;\n  }\n}\n\nexport class Image {\n  img: string;\n  thumb?: string;\n  description?: string;\n  extUrl?: string;\n\n  constructor(img: string, thumb?: string, description?: string, extUrl?: string) {\n    this.img = img;\n    this.thumb = thumb;\n    this.description = description;\n    this.extUrl = extUrl;\n  }\n}\n\nexport enum Keyboard {\n  ESC = 27,\n  LEFT_ARROW = 37,\n  RIGHT_ARROW = 39,\n  UP_ARROW = 38,\n  DOWN_ARROW = 40\n}\n\nexport interface Description {\n  customFullDescription?: string;\n  imageText?: string;\n  numberSeparator?: string;\n  beforeTextDescription?: string;\n}\n\n@Component({\n  selector: 'modal-gallery',\n  exportAs: 'modalGallery',\n  styleUrls: ['modal-gallery.scss'],\n  templateUrl: 'modal-gallery.html'\n})\nexport class AngularModalGallery implements OnInit, OnDestroy, OnChanges {\n  opened: boolean = false;\n  loading: boolean = false;\n  showGallery: boolean = false;\n\n  images: Image[];\n  currentImage: Image;\n  currentImageIndex: number = 0;\n\n  // enum action used to pass a click action\n  // when you clicks over the modal image.\n  // Declared here  to use it in the template.\n  clickAction: Action = Action.CLICK;\n\n  private SWIPE_ACTION = {\n    LEFT: 'swipeleft',\n    RIGHT: 'swiperight',\n    UP: 'swipeup',\n    DOWN: 'swipedown'\n  };\n\n  private subscription: Subscription;\n\n  @Input() modalImages: Observable<Array<Image>> | Array<Image>;\n  @Input() imagePointer: number;\n  @Input() downloadable: boolean = false;\n  @Input() description: Description;\n  // used only inside upper-button's component\n  @Input() showDownloadButton: boolean = false;\n  @Input() showExtUrlButton: boolean = false;\n\n  @Output() close: EventEmitter<ImageModalEvent> = new EventEmitter<ImageModalEvent>();\n  @Output() show: EventEmitter<ImageModalEvent> = new EventEmitter<ImageModalEvent>();\n  @Output() firstImage: EventEmitter<ImageModalEvent> = new EventEmitter<ImageModalEvent>();\n  @Output() lastImage: EventEmitter<ImageModalEvent> = new EventEmitter<ImageModalEvent>();\n  @Output() hasData: EventEmitter<ImageModalEvent> = new EventEmitter<ImageModalEvent>();\n\n  @HostListener('window:keydown', ['$event'])\n  onKeyDown(e: KeyboardEvent) {\n    if (!this.opened) {\n      return;\n    }\n    switch (e.keyCode) {\n      case Keyboard.ESC:\n        this.closeGallery(Action.KEYBOARD);\n        break;\n      case Keyboard.RIGHT_ARROW:\n        this.nextImage(Action.KEYBOARD);\n        break;\n      case Keyboard.LEFT_ARROW:\n        this.prevImage(Action.KEYBOARD);\n        break;\n    }\n  }\n\n  constructor(private keyboardService: KeyboardService) {\n    // if description isn't provided initialize it with a default object\n    if (!this.description) {\n      this.description = {\n        imageText: 'Image ',\n        numberSeparator: '/',\n        beforeTextDescription: ' - '\n      }\n    }\n\n    // if one of the Description fields isn't initialized, provide a default value\n    this.description.imageText = this.description.imageText || 'Image ';\n    this.description.numberSeparator = this.description.numberSeparator || '/';\n    this.description.beforeTextDescription = this.description.beforeTextDescription || ' - ';\n  }\n\n  ngOnInit() {\n    this.initImages();\n  }\n\n  private initImages() {\n    if (this.modalImages instanceof Array) {\n      this.images = this.modalImages;\n      this.completeInitialization();\n    } else {\n      if (this.modalImages instanceof Observable) {\n        this.subscription = this.modalImages.subscribe((val: Array<Image>) => {\n          this.images = val;\n          this.completeInitialization();\n        });\n      }\n    }\n  }\n\n  private completeInitialization() {\n    this.hasData.emit(new ImageModalEvent(Action.LOAD, true));\n    this.loading = true;\n    if (this.imagePointer >= 0) {\n      this.showGallery = false;\n      this.showModalGallery(this.imagePointer);\n    } else {\n      this.showGallery = true;\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    // to prevent errors when you pass to this library\n    // the array of images inside a subscribe block, in this way: `...subscribe(val => { this.images = arrayOfImages })`\n    // As you can see, I'm providing examples in these situations in all official demos\n    if (this.modalImages) {\n      this.initImages();\n    }\n  }\n\n  getDescriptionToDisplay() {\n    if (this.description && this.description.customFullDescription) {\n      return this.description.customFullDescription;\n    }\n    // If the current image hasn't a description,\n    // prevent to write the ' - ' (or this.description.beforeTextDescription)\n    if (!this.currentImage.description || this.currentImage.description === '') {\n      return `${this.description.imageText}${this.currentImageIndex + 1}${this.description.numberSeparator}${this.images.length}`;\n    }\n    return `${this.description.imageText}${this.currentImageIndex + 1}${this.description.numberSeparator}${this.images.length}${this.description.beforeTextDescription}${this.currentImage.description}`;\n  }\n\n  // hammerjs touch gestures support\n  swipe(index: number, action = this.SWIPE_ACTION.RIGHT) {\n    switch (action) {\n      case this.SWIPE_ACTION.RIGHT:\n        this.nextImage(Action.SWIPE);\n        break;\n      case this.SWIPE_ACTION.LEFT:\n        this.prevImage(Action.SWIPE);\n        break;\n      // case this.SWIPE_ACTION.UP:\n      //   break;\n      // case this.SWIPE_ACTION.DOWN:\n      //   break;\n    }\n  }\n\n  closeGallery(action: Action = Action.NORMAL) {\n    this.close.emit(new ImageModalEvent(action, true));\n    this.opened = false;\n    this.keyboardService.reset();\n  }\n\n  prevImage(action: Action = Action.NORMAL) {\n    this.loading = true;\n    this.currentImageIndex = this.getPrevIndex(action, this.currentImageIndex);\n    this.showModalGallery(this.currentImageIndex);\n  }\n\n  nextImage(action: Action = Action.NORMAL) {\n    this.loading = true;\n    this.currentImageIndex = this.getNextIndex(action, this.currentImageIndex);\n    this.showModalGallery(this.currentImageIndex);\n  }\n\n  onShowModalGallery(index: number) {\n    this.showModalGallery(index);\n  }\n\n  showModalGallery(index: number) {\n    this.keyboardService.add((event: KeyboardEvent, combo: string) => {\n      if (event.preventDefault) {\n        event.preventDefault();\n      } else {\n        // internet explorer\n        event.returnValue = false;\n      }\n      this.downloadImage();\n    });\n\n    this.currentImageIndex = index;\n    this.opened = true;\n    this.currentImage = this.images[this.currentImageIndex];\n    this.loading = false;\n\n    // emit current visible image index\n    this.show.emit(new ImageModalEvent(Action.LOAD, this.currentImageIndex + 1));\n  }\n\n  downloadImage() {\n    if (!this.downloadable) {\n      return;\n    }\n    // for all browsers\n    // Attention: with IE is not working, but it will navigate to the image\n    let link = document.createElement('a');\n    link.href = this.currentImage.img;\n    link.setAttribute('download', this.getFileName(this.currentImage.img));\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  }\n\n  private getNextIndex(action: Action, currentIndex: number): number {\n    let newIndex: number = 0;\n    if (currentIndex >= 0 && currentIndex < this.images.length - 1) {\n      newIndex = currentIndex + 1;\n    } else {\n      newIndex = 0; // start from the first index\n    }\n\n    // emit first/last event based on newIndex value\n    this.emitBoundaryEvent(action, newIndex);\n\n    // emit current visible image index\n    this.show.emit(new ImageModalEvent(action, newIndex));\n\n    return newIndex;\n  }\n\n  private getPrevIndex(action: Action, currentIndex: number): number {\n    let newIndex: number = 0;\n    if (currentIndex > 0 && currentIndex <= this.images.length - 1) {\n      newIndex = currentIndex - 1;\n    } else {\n      newIndex = this.images.length - 1; // start from the last index\n    }\n\n    // emit first/last event based on newIndex value\n    this.emitBoundaryEvent(action, newIndex);\n\n    // emit current visible image index\n    this.show.emit(new ImageModalEvent(action, newIndex));\n\n    return newIndex;\n  }\n\n  private emitBoundaryEvent(action: Action, indexToCheck: number) {\n    // to emit first/last event\n    switch (indexToCheck) {\n      case 0:\n        this.firstImage.emit(new ImageModalEvent(action, true));\n        break;\n      case this.images.length - 1:\n        this.lastImage.emit(new ImageModalEvent(action, true));\n        break;\n    }\n  }\n\n  private getFileName(path: string) {\n    return path.replace(/^.*[\\\\\\/]/, '');\n  }\n\n  ngOnDestroy() {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n    this.keyboardService.reset();\n  }\n}\n"]}