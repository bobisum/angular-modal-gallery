!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("rxjs"),require("mousetrap")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","rxjs","mousetrap"],e):e((t.ng=t.ng||{},t.ng.angular=t.ng.angular||{},t.ng.angular.modal=t.ng.angular.modal||{},t.ng.angular.modal.gallery=t.ng.angular.modal.gallery||{}),t.ng.core,t.ng.common,t.rxjs)}(this,function(t,e,o,n){"use strict";var i=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},r=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=function(){function t(){this.mousetrap=new Mousetrap}return t.prototype.add=function(t){this.mousetrap.bind(["ctrl+s","meta+s"],function(e,o){e.preventDefault?e.preventDefault():e.returnValue=!1,t(e,o)})},t.prototype.reset=function(){this.mousetrap.reset()},t}();a=i([e.Injectable(),r("design:paramtypes",[])],a);var s=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},l=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};!function(t){t[t.NORMAL=0]="NORMAL",t[t.CLICK=1]="CLICK",t[t.KEYBOARD=2]="KEYBOARD",t[t.SWIPE=3]="SWIPE",t[t.LOAD=4]="LOAD"}(t.Action||(t.Action={}));var p,c=function(){function t(t,e){this.action=t,this.result=e}return t}(),d=function(){function t(t,e,o,n){this.img=t,this.thumb=e,this.description=o,this.extUrl=n}return t}();!function(t){t[t.ESC=27]="ESC",t[t.LEFT_ARROW=37]="LEFT_ARROW",t[t.RIGHT_ARROW=39]="RIGHT_ARROW",t[t.UP_ARROW=38]="UP_ARROW",t[t.DOWN_ARROW=40]="DOWN_ARROW"}(p||(p={}));var g=function(){function o(o){this.keyboardService=o,this.opened=!1,this.loading=!1,this.showGallery=!1,this.currentImageIndex=0,this.clickAction=t.Action.CLICK,this.SWIPE_ACTION={LEFT:"swipeleft",RIGHT:"swiperight",UP:"swipeup",DOWN:"swipedown"},this.downloadable=!1,this.showDownloadButton=!1,this.showExtUrlButton=!1,this.close=new e.EventEmitter,this.show=new e.EventEmitter,this.firstImage=new e.EventEmitter,this.lastImage=new e.EventEmitter,this.hasData=new e.EventEmitter,this.description||(this.description={imageText:"Image ",numberSeparator:"/",beforeTextDescription:" - "}),this.description.imageText=this.description.imageText||"Image ",this.description.numberSeparator=this.description.numberSeparator||"/",this.description.beforeTextDescription=this.description.beforeTextDescription||" - "}return o.prototype.onKeyDown=function(e){if(this.opened)switch(e.keyCode){case p.ESC:this.closeGallery(t.Action.KEYBOARD);break;case p.RIGHT_ARROW:this.nextImage(t.Action.KEYBOARD);break;case p.LEFT_ARROW:this.prevImage(t.Action.KEYBOARD)}},o.prototype.ngOnInit=function(){this.initImages()},o.prototype.initImages=function(){var t=this;this.modalImages instanceof Array?(this.images=this.modalImages,this.completeInitialization()):this.modalImages instanceof n.Observable&&(this.subscription=this.modalImages.subscribe(function(e){t.images=e,t.completeInitialization()}))},o.prototype.completeInitialization=function(){this.hasData.emit(new c(t.Action.LOAD,!0)),this.loading=!0,this.imagePointer>=0?(this.showGallery=!1,this.showModalGallery(this.imagePointer)):this.showGallery=!0},o.prototype.ngOnChanges=function(t){this.modalImages&&this.initImages()},o.prototype.getDescriptionToDisplay=function(){return this.description&&this.description.customFullDescription?this.description.customFullDescription:this.currentImage.description&&""!==this.currentImage.description?""+this.description.imageText+(this.currentImageIndex+1)+this.description.numberSeparator+this.images.length+this.description.beforeTextDescription+this.currentImage.description:""+this.description.imageText+(this.currentImageIndex+1)+this.description.numberSeparator+this.images.length},o.prototype.swipe=function(e,o){switch(void 0===o&&(o=this.SWIPE_ACTION.RIGHT),o){case this.SWIPE_ACTION.RIGHT:this.nextImage(t.Action.SWIPE);break;case this.SWIPE_ACTION.LEFT:this.prevImage(t.Action.SWIPE)}},o.prototype.closeGallery=function(e){void 0===e&&(e=t.Action.NORMAL),this.close.emit(new c(e,!0)),this.opened=!1,this.keyboardService.reset()},o.prototype.prevImage=function(e){void 0===e&&(e=t.Action.NORMAL),this.loading=!0,this.currentImageIndex=this.getPrevIndex(e,this.currentImageIndex),this.showModalGallery(this.currentImageIndex)},o.prototype.nextImage=function(e){void 0===e&&(e=t.Action.NORMAL),this.loading=!0,this.currentImageIndex=this.getNextIndex(e,this.currentImageIndex),this.showModalGallery(this.currentImageIndex)},o.prototype.onShowModalGallery=function(t){this.showModalGallery(t)},o.prototype.showModalGallery=function(e){var o=this;this.keyboardService.add(function(t,e){t.preventDefault?t.preventDefault():t.returnValue=!1,o.downloadImage()}),this.currentImageIndex=e,this.opened=!0,this.currentImage=this.images[this.currentImageIndex],this.loading=!1,this.show.emit(new c(t.Action.LOAD,this.currentImageIndex+1))},o.prototype.downloadImage=function(){if(this.downloadable){var t=document.createElement("a");t.href=this.currentImage.img,t.setAttribute("download",this.getFileName(this.currentImage.img)),document.body.appendChild(t),t.click(),document.body.removeChild(t)}},o.prototype.getNextIndex=function(t,e){var o=0;return o=e>=0&&e<this.images.length-1?e+1:0,this.emitBoundaryEvent(t,o),this.show.emit(new c(t,o)),o},o.prototype.getPrevIndex=function(t,e){var o=0;return o=e>0&&e<=this.images.length-1?e-1:this.images.length-1,this.emitBoundaryEvent(t,o),this.show.emit(new c(t,o)),o},o.prototype.emitBoundaryEvent=function(t,e){switch(e){case 0:this.firstImage.emit(new c(t,!0));break;case this.images.length-1:this.lastImage.emit(new c(t,!0))}},o.prototype.getFileName=function(t){return t.replace(/^.*[\\\/]/,"")},o.prototype.ngOnDestroy=function(){this.subscription&&this.subscription.unsubscribe(),this.keyboardService.reset()},o}();s([e.Input(),l("design:type",Object)],g.prototype,"modalImages",void 0),s([e.Input(),l("design:type",Number)],g.prototype,"imagePointer",void 0),s([e.Input(),l("design:type",Boolean)],g.prototype,"downloadable",void 0),s([e.Input(),l("design:type",Object)],g.prototype,"description",void 0),s([e.Input(),l("design:type",Boolean)],g.prototype,"showDownloadButton",void 0),s([e.Input(),l("design:type",Boolean)],g.prototype,"showExtUrlButton",void 0),s([e.Output(),l("design:type",e.EventEmitter)],g.prototype,"close",void 0),s([e.Output(),l("design:type",e.EventEmitter)],g.prototype,"show",void 0),s([e.Output(),l("design:type",e.EventEmitter)],g.prototype,"firstImage",void 0),s([e.Output(),l("design:type",e.EventEmitter)],g.prototype,"lastImage",void 0),s([e.Output(),l("design:type",e.EventEmitter)],g.prototype,"hasData",void 0),s([e.HostListener("window:keydown",["$event"]),l("design:type",Function),l("design:paramtypes",[KeyboardEvent]),l("design:returntype",void 0)],g.prototype,"onKeyDown",null),g=s([e.Component({selector:"modal-gallery",exportAs:"modalGallery",styles:[".ng-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.8);z-index:9999;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}.ng-gallery-content{position:fixed;top:0;left:0;width:100%;height:100%;z-index:10000;text-align:center}.ng-gallery-content>a.nav-left,.ng-gallery-content>a.nav-right{color:#fff!important;text-decoration:none;font-size:60px;cursor:pointer;outline:0}.ng-gallery-content>a.nav-left{position:fixed;left:15px;top:50%;transform:translateY(-50%)}.ng-gallery-content>a.nav-right{position:fixed;right:15px;top:50%;transform:translateY(-50%)}.ng-gallery-content>img{height:auto;max-height:calc(100% - 150px);max-width:calc(100% - 100px);position:relative;display:block;margin:0 auto 0 auto;top:50%;transform:translateY(-50%);-webkit-transform:translateY(-50%);cursor:pointer;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}.ng-gallery-content.effect{animation:fadeIn .5s}.ng-gallery-content>span.info-text{color:#fff;display:inline-block;width:100%;height:20px;font-weight:700;text-align:center;position:fixed;left:0;right:0}@media (max-width:676px){.ng-gallery-content>span.info-text{bottom:100px}}@media (min-width:676px) and (max-width:752px){.ng-gallery-content>span.info-text{padding-top:52px}}@media (min-width:752px) and (max-width:804px){.ng-gallery-content>span.info-text{padding-top:43px}}@media (min-width:804px){.ng-gallery-content>span.info-text{bottom:100px}}.ng-gallery-content>.ng-thumbnails-wrapper{width:400px;height:70px;text-align:center;position:fixed;bottom:20px;left:0;right:0;margin-left:auto;margin-right:auto;overflow-x:hidden}.ng-gallery-content>.ng-thumbnails-wrapper>.ng-thumbnails{width:4000px;height:70px}.ng-gallery-content>.ng-thumbnails-wrapper>.ng-thumbnails>div>img{width:auto;height:70px;float:left;margin-right:10px;cursor:pointer;opacity:.6}.ng-gallery-content>.ng-thumbnails-wrapper>.ng-thumbnails>div>img.active,.ng-gallery-content>.ng-thumbnails-wrapper>.ng-thumbnails>div>img:hover{transition:opacity .25s ease;opacity:1}@keyframes fadeIn{from{opacity:.3}to{opacity:1}}uiload{display:inline-block;position:relative}uiload>div{position:relative}@-webkit-keyframes uil-ring-anim{0%{-ms-transform:rotate(0);-moz-transform:rotate(0);-webkit-transform:rotate(0);-o-transform:rotate(0);transform:rotate(0)}100%{-ms-transform:rotate(360deg);-moz-transform:rotate(360deg);-webkit-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes uil-ring-anim{0%{-ms-transform:rotate(0);-moz-transform:rotate(0);-webkit-transform:rotate(0);-o-transform:rotate(0);transform:rotate(0)}100%{-ms-transform:rotate(360deg);-moz-transform:rotate(360deg);-webkit-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@-ms-keyframes uil-ring-anim{0%{-ms-transform:rotate(0);-moz-transform:rotate(0);-webkit-transform:rotate(0);-o-transform:rotate(0);transform:rotate(0)}100%{-ms-transform:rotate(360deg);-moz-transform:rotate(360deg);-webkit-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes uil-ring-anim{0%{-ms-transform:rotate(0);-moz-transform:rotate(0);-webkit-transform:rotate(0);-o-transform:rotate(0);transform:rotate(0)}100%{-ms-transform:rotate(360deg);-moz-transform:rotate(360deg);-webkit-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.uil-ring-css{background:0 0;position:relative;top:0;margin:180px auto 0 auto;width:100px;height:100px}.uil-ring-css>div{position:absolute;display:block;width:80px;height:80px;top:20px;left:20px;border-radius:40px;box-shadow:0 6px 0 0 #fff;-ms-animation:uil-ring-anim 1s linear infinite;-moz-animation:uil-ring-anim 1s linear infinite;-webkit-animation:uil-ring-anim 1s linear infinite;-o-animation:uil-ring-anim 1s linear infinite;animation:uil-ring-anim 1s linear infinite}"],template:'<gallery [images]="images" [showGallery]="showGallery" (show)="onShowModalGallery($event)"></gallery><div class="ng-overlay" *ngIf="opened"><div class="ng-gallery-content"><div class="uil-ring-css" *ngIf="loading"><div></div></div><upperButtons [image]="currentImage" [showDownload]="showDownloadButton" [showExtUrl]="showExtUrlButton" (close)="closeGallery()" (download)="downloadImage()"></upperButtons><a class="nav-left" *ngIf="(images)?.length > 1" (click)="prevImage()"><i class="fa fa-angle-left"></i></a> <img *ngIf="!loading" src="{{ currentImage.img }}" (click)="nextImage(clickAction)" class="effect" (swipeleft)="swipe(currentImageIndex, $event.type)" (swiperight)="swipe(currentImageIndex, $event.type)"> <a class="nav-right" *ngIf="(images)?.length > 1" (click)="nextImage()"><i class="fa fa-angle-right"></i></a> <span class="info-text">{{getDescriptionToDisplay()}}</span></div></div>'}),l("design:paramtypes",[a])],g);var u=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},f=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},m=function(){function t(t){this.el=t}return t.prototype.ngOnChanges=function(t){this.el.nativeElement.style.right=this.showExtUrlButton?"63px":"0px",this.el.nativeElement.hidden=!this.showExtUrlButton||!this.imgExtUrl},t}();u([e.Input("externalUrlButton"),f("design:type",Boolean)],m.prototype,"showExtUrlButton",void 0),u([e.Input(),f("design:type",String)],m.prototype,"imgExtUrl",void 0),m=u([e.Directive({selector:"[externalUrlButton]"}),f("design:paramtypes",[e.ElementRef])],m);var h=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},y=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},x=function(){function t(t){this.el=t}return t.prototype.ngOnChanges=function(t){var e;e=this.downloadButton?!0===this.extUrlButton&&this.imgExtUrl?"126px":"63px":"0px",this.el.nativeElement.style.right=e,this.el.nativeElement.hidden=!this.downloadButton},t}();h([e.Input("downloadButton"),y("design:type",Boolean)],x.prototype,"downloadButton",void 0),h([e.Input(),y("design:type",Boolean)],x.prototype,"extUrlButton",void 0),h([e.Input(),y("design:type",String)],x.prototype,"imgExtUrl",void 0),x=h([e.Directive({selector:"[downloadButton]"}),y("design:paramtypes",[e.ElementRef])],x);var w=[m,x],v=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},I=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},b=function(){function t(){this.showDownload=!1,this.showExtUrl=!1,this.close=new e.EventEmitter,this.download=new e.EventEmitter}return t.prototype.downloadImage=function(){this.download.emit(!0)},t.prototype.closeGallery=function(){this.close.emit(!0)},t}();v([e.Input(),I("design:type",d)],b.prototype,"image",void 0),v([e.Input(),I("design:type",Boolean)],b.prototype,"showDownload",void 0),v([e.Input(),I("design:type",Boolean)],b.prototype,"showExtUrl",void 0),v([e.Output(),I("design:type",e.EventEmitter)],b.prototype,"close",void 0),v([e.Output(),I("design:type",e.EventEmitter)],b.prototype,"download",void 0),b=v([e.Component({selector:"upperButtons",styles:["a.close-popup{font-size:42px;float:right;color:#fff!important;text-decoration:none;margin:0 30px 0 0;cursor:pointer;position:absolute;top:20px;right:0}a.external-url-image{font-size:33px;float:right;color:#fff!important;text-decoration:none;margin:0 30px 0 0;cursor:pointer;position:absolute;top:28px;right:0}a.download-image{font-size:33px;float:right;color:#fff!important;text-decoration:none;margin:0 30px 0 0;cursor:pointer;position:absolute;top:28px;right:0}"],template:'\n    <a class="external-url-image" [externalUrlButton]="showExtUrl" [imgExtUrl]="image.extUrl"\n       href="{{image.extUrl}}"><i class="fa fa-external-link"></i></a>\n    <a class="download-image" [downloadButton]="showDownload" [extUrlButton]="showExtUrl"\n       [imgExtUrl]="image.extUrl" (click)="downloadImage()"><i class="fa fa-download"></i></a>\n    <a class="close-popup" (click)="closeGallery()"><i class="fa fa-close"></i></a>\n  '})],b);var R=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},E=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},O=function(){function t(){this.show=new e.EventEmitter}return t.prototype.showModalGallery=function(t){this.show.emit(t)},t}();R([e.Input(),E("design:type",Array)],O.prototype,"images",void 0),R([e.Input(),E("design:type",Boolean)],O.prototype,"showGallery",void 0),R([e.Output(),E("design:type",e.EventEmitter)],O.prototype,"show",void 0),O=R([e.Component({selector:"gallery",styles:[".ng-gallery{width:100%;display:inline-block}img.ng-thumb{height:50px;float:left;display:block;cursor:pointer;margin:2px 2px 0 0}"],template:'\n    <div class="ng-gallery" *ngIf="showGallery">\n      <div *ngFor="let i of images; let index = index">\n        <img *ngIf="i.thumb" src="{{ i.thumb }}" class="ng-thumb" (click)="showModalGallery(index)"\n             alt="{{ i.description }}"/>\n        <img *ngIf="!i.thumb" src="{{ i.img }}" class="ng-thumb" (click)="showModalGallery(index)"\n             alt="{{ i.description }}"/>\n      </div>\n    </div>\n  '})],O);var k=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},A=D=function(){function t(){}return t.forRoot=function(){return{ngModule:D,providers:[a]}},t}();A=D=k([e.NgModule({imports:[o.CommonModule],declarations:[g,b,O,w],exports:[g]})],A);var D,B=function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};t.AngularRootModalGalleryModule=function(){function t(){}return t}(),t.AngularRootModalGalleryModule=B([e.NgModule({imports:[A.forRoot()],exports:[A]})],t.AngularRootModalGalleryModule),t.ModalGalleryModule=function(){function e(){}return e.forRoot=function(){return{ngModule:t.AngularRootModalGalleryModule}},e}(),t.ModalGalleryModule=B([e.NgModule({imports:[A],exports:[A]})],t.ModalGalleryModule),t.Image=d,t.ImageModalEvent=c,Object.defineProperty(t,"__esModule",{value:!0})});